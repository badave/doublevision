{
  "name": "mongo-gyro",
  "version": "0.1.16",
  "description": "A lightweight wrapper for MongoDB using promises",
  "main": "mongo.js",
  "scripts": {
    "test": "mocha -R spec test/index.js"
  },
  "homepage": "https://github.com/airbrite/mongo-gyro",
  "repository": {
    "type": "git",
    "url": "https://github.com/airbrite/mongo-gyro.git"
  },
  "keywords": [
    "mongo",
    "mongodb"
  ],
  "dependencies": {
    "bluebird": "~0.10.5-0",
    "lodash": "~2.3.0",
    "mongodb": "~1.3.x"
  },
  "devDependencies": {
    "mocha": "~1.14.0",
    "grunt": "~0.4.1",
    "grunt-release": "~0.6.0",
    "mocha-as-promised": "~1.4.0",
    "chai-as-promised": "~4.1.0",
    "chai": "~1.8.0",
    "sinon-chai": "~2.4.0",
    "sinon": "~1.7.3",
    "cli-color": "*",
    "groc": "*"
  },
  "author": {
    "name": "David Badley",
    "url": "https://github.com/badave"
  },
  "license": "MIT",
  "readmeFilename": "README.md",
  "readme": "mongo-gyro\n==========\n\nMongo-Gyro is a light-weight mongo wrapper for nodejs.  We found that the official mongo driver and alternatives were a little odd to use in practice (callback hell or unusual modeling).  Mongo-Gyro takes the official mongo-native driver for nodejs and makes it unsuck.\n\nIt supports both callbacks and promises -- it will callback first and then return the promise.  It casts and uncasts from strings to ObjectIds and back again automagically so you never have to worry about casting again.  Our ultimate goal is to make Mongo fun to work with.\n\nWe've also incorporated into our fork of Bookshelf, making it easy to use either SQL or Mongo using the same ORM modeled on Backbone.  (docs pending)\n\n\n*See MongoDB docs for \"options\" for different calls, and also syntax of objects for update, findAndModify and aggregate calls*\n\n\n## Setup\n```\n  npm install mongo-gyro\n```\n\nor add this to your package.json\n\n```\n  \"mongo-gyro\": \"*\"\n```\n\nand `npm install`\n\n\n## Creating an instance\n\n```\n  var Mongo = require('mongo-gyro');\n\n  var mongo = new Mongo(); // defaults to localhost:27017\n\n  // or\n\n  var url = \"mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]\"; // see http://docs.mongodb.org/manual/reference/connection-string/\n  var mongo = new Mongo(url, [options]); // options here are connection options for mongodb\n```\n\n## Methods\n\nAll calls take a callback as the last parameter OR return a promise.  The promise library used is bluebird.\n\n#### Example using a callback\n\n```\n  mongo.find(\"users\", { \"email\": \"spam@gmail.com\"}, function(err, object) {\n    if(err) {\n      console.log(err);\n    } else {\n      console.log(object);\n    }\n  });\n```\n\n#### Example using a promise:\n```\n  mongo.find(\"users\", { \"email\": \"spam@gmail.com\"})\n    .then(function(object) {\n      console.log(object);\n    })\n    .caught(function(err) { // if there is an error\n      console.log(err);\n    });\n```\n\n\n### Find\n\n`mongo.find(collectionName, query, [options], [callback]);`\n\nOptions can specify sort, limit, skip, fields, and other find options.  Other options are specified in the MongoDB docs.\n\n```\n  mongo.find(\"users\", { \"email\": \"spam@gmail.com\"});\n```\n\n```\n  mongo.find(\"users\", { \"email\": \"spam@gmail.com\"}, { \"sort\": { \"email\": -1 }, \"limit\": 1, \"skip\": 1, \"fields\": { \"name\": true, \"email\": true, \"_id\": true } });\n```\n\n\n### findCursor\n\nSame as find, but you get the cursor back. Recommended for advanced users and only when needed.\n\n\n### findOne\n\n`mongo.findOne(collectionName, query, [options], [callback]);`\n\n```\n  mongo.findOne(\"users\", { \"email\": \"spam@gmail.com\"});\n```\n\n\n### insert\n\n`mongo.insert(collectionName, object, [options], [callback]);`\n\n```\n  mongo.insert(\"users\", { \"email\": \"spam@gmail.com\", \"name\": \"Billy Testestest\"});\n```\n\n\n### update\n\nMongo's update doesn't actually bring back very much information.  We've found that it's almost always preferable for us to use findAndModify, but in some cases update is adequate.\n\n`mongo.update(collectionName, query, object, [options], [callback]);`\n\n```\n  mongo.update(\"users\", { \"email\": \"spam@gmail.com\" }, { \"$set\": { \"name\": \"Willy Testestest\" } });\n```\n\n\n### findAndModify\n\n`mongo.findAndModify(collectionName, query, object, [options], [callback]);`\n\n```\n  mongo.findAndModify(\"users\", { \"email\": \"spam@gmail.com\" }, { \"$set\": { \"name\": \"Willy Testestest\" } });\n```\n\n\n### remove\n\n`mongo.remove(collectionName, query, [options], [callback]);`\n\n```\n  mongo.remove(\"users\", { \"email\": \"spam@gmail.com\" });\n```\n\n### aggregate \n\n\n### aggregate\n\n`mongo.aggregate(collectionName, pipeline, [options], [callback]);`\n\n```\n  mongo.aggregate(\"users\", \n      { \n        \"$match\": { \n          \"email\": \"spam@gmail.com\" \n        } \n      },\n      {\n        \"$project\": { \"email\": 1, \"total\": 1 }\n      },\n      {\n        \"$group\": {\n          _id: \"$email\",\n          revenue: {\n            \"$sum\": \"$total\"\n          }\n        }\n      });\n```\n\n\n### getNextSequence\n\n-- This is a special helper for us.  Specifying { \"upsert\": true } in the options will create it if it doesn't exist (recommended).  Returns the next number in a sequence by incrementing the key \"seq\" in an object.\n\n`mongo.getNextSequence(collectionName, query, [options], [callback]);`\n\n```\n  mongo.getNextSequence(\"users_counter\", { \"name\": \"number_of_users\" });\n```\n\n\n### eraseCollection\n\nDanger -- you probably don't want to put this in your code unless you are a sadomasochist.\n\n`mongo.eraseCollection(collectionName, [callback]);`\n\n```\n  mongo.eraseCollection(\"users\"); // and you definitely don't want this in your code unless its in a unit test\n```\n\n\n### ensureIndex\n\nDoesn't return anything.\n\n`mongo.ensureIndex(collectionName, index, [options], [callback]);`\n\n```\n  mongo.ensureIndex(\"users\", \"name\");\n  \n  mongo.ensureIndex(\"users\", \"email\", {\"unique\": true}); // for uniqueness\n```\n\n\n### dropIndexes\n\nRemoves all the indexes on a collection\n\n`mongo.dropIndexes(collectionName, [callback]);`\n\n```\n  mongo.dropIndexes(\"users\");\n```",
  "bugs": {
    "url": "https://github.com/airbrite/mongo-gyro/issues"
  },
  "_id": "mongo-gyro@0.1.16",
  "_from": "mongo-gyro@0.1.16",
  "dist": {
    "shasum": "1156ed420bb5c0f0865314d9eefe6c9014a4940d"
  },
  "_resolved": "https://registry.npmjs.org/mongo-gyro/-/mongo-gyro-0.1.16.tgz"
}
